<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Pledge Taxes Calculator</title>
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>
    <div id="root">
      <div class="App">
        <h1>Pledge Taxes Calculator</h1>
        
        <div style="margin-bottom: 30px;">
          <!-- Tax Rates Section -->
          <h2>Tax Rates</h2>
          
          <div class="field-container">
            <div class="label-container">
              <label style="font-weight: 500;">Income tax</label>
              <div class="description">
                Also, short term capital gains tax <a href="#notes" style="color: inherit; text-decoration: none;">[1]</a>. 
                If you're calculating this at home, remember to include payroll taxes for income, and NIIT for capital gains.
              </div>
            </div>
            <div class="input-group">
              <input 
                type="text" 
                id="incomeTaxRate"
                value="50"
              />
              <span style="margin-left: 5px;">%</span>
            </div>
          </div>
          
          <div class="field-container">
            <div class="label-container">
              <label style="font-weight: 500;">Long term capital gains tax (ltcg)</label>
              <div class="description">
                If you're calculating this at home, remember to include NIIT.
              </div>
            </div>
            <div class="input-group">
              <input 
                type="text" 
                id="ltcgRate"
                value="35"
              />
              <span style="margin-left: 5px;">%</span>
            </div>
          </div>
          
          <!-- Stock Prices Section -->
          <h2>Stock Prices</h2>
          
          <div class="field-container">
            <div class="label-container">
              <label style="font-weight: 500;">Strike price</label>
              <div class="description">
                The 409a valuation at the time your grant was issued.
              </div>
            </div>
            <div class="input-group">
              <span style="margin-right: 5px;">$</span>
              <input 
                type="text" 
                id="strikePrice"
                value="10"
              />
            </div>
          </div>
          
          <div class="field-container">
            <div class="label-container">
              <label style="font-weight: 500;">Exercise price</label>
              <div class="description">
                The 409a valuation at the time of exercise (which is at least 1 year after you started working).
              </div>
            </div>
            <div class="input-group">
              <span style="margin-right: 5px;">$</span>
              <input 
                type="text" 
                id="exercisePrice"
                value="20"
              />
            </div>
          </div>
          
          <div class="field-container">
            <div class="label-container">
              <label style="font-weight: 500;">Sale price</label>
              <div class="description">
                The 409a valuation at the time of the liquidity event.
              </div>
            </div>
            <div class="input-group">
              <span style="margin-right: 5px;">$</span>
              <input 
                type="text" 
                id="salePrice"
                value="60"
              />
            </div>
          </div>
          
          <!-- Warning Section -->
          <div id="price-warning"></div>
          
          <!-- Results Section -->
          <h2>Calculated Results</h2>
          <div id="results" style="margin-bottom: 30px;">
            Calculating...
          </div>
        </div>
        
        <hr>

        <!-- Options Comparison Table -->
        <div style="margin-bottom: 30px;">
          <h2>Stock Options: Compare Your Options</h2>
          
          
          <div class="field-container" style="margin-bottom: 20px;">
            <div class="label-container">
              <label style="font-weight: 500;">Match</label>
            </div>
            <div class="input-group" style="display: flex; gap: 15px; width: auto;">
              <label style="display: flex; align-items: center; gap: 4px;">
                <input type="radio" name="match" value="none" checked> None
              </label>
              <label style="display: flex; align-items: center; gap: 4px;">
                <input type="radio" name="match" value="1:1"> 1:1
              </label>
              <label style="display: flex; align-items: center; gap: 4px;">
                <input type="radio" name="match" value="3:1"> 3:1
              </label>
            </div>
          </div>
          
          <div class="grid-table-container">
            <div class="grid-table">
              <!-- Table Header -->
              <div class="grid-header">Option type</div>
              <div class="grid-header">Holding period</div>
              <div class="grid-header">Disposal Method</div>
              <div class="grid-header">Government gets</div>
              <div class="grid-header">Charity gets <a href="#notes" style="color: inherit; text-decoration: none;">[2]</a></div>
              <div class="grid-header">You get in cash</div>
              <div class="grid-header">You get via tax deduction <a href="#notes" style="color: inherit; text-decoration: none;">[3]</a></div>
              <div class="grid-header"># of shares</div>
              
              <!-- Row 1 -->
              <div class="grid-cell">ISO or NSO</div>
              <div class="grid-cell">Cashless exercise during liquidity</div>
              <div class="grid-cell">Sell</div>
              <div class="grid-cell">income tax * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell">(1 - income tax) * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 2 -->
              <div class="grid-cell">ISO or NSO</div>
              <div class="grid-cell">Cashless exercise during liquidity</div>
              <div class="grid-cell">Donate</div>
              <div class="grid-cell">income tax * sprain</div>
              <div class="grid-cell">(1 - income tax) * sprain * (1 + match)</div>
              <div class="grid-cell"></div>
              <div class="grid-cell">(1 - income tax) * sprain * income tax</div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 3 -->
              <div class="grid-cell">ISO or NSO</div>
              <div class="grid-cell">Dispose &lt;1 yr after exercise</div>
              <div class="grid-cell">Sell</div>
              <div class="grid-cell">income tax * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell">(1 - income tax) * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 4 -->
              <div class="grid-cell">ISO or NSO</div>
              <div class="grid-cell">Dispose &lt;1 yr after exercise</div>
              <div class="grid-cell">Donate</div>
              <div class="grid-cell">income tax * sprain</div>
              <div class="grid-cell">sale price * (1 + match)</div>
              <div class="grid-cell">- strike price - income tax * sprain</div>
              <div class="grid-cell">exercise price * income tax</div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 5 - ISO Sell -->
              <div class="grid-cell">ISO</div>
              <div class="grid-cell">Dispose 1+ yr after exercise</div>
              <div class="grid-cell">Sell</div>
              <div class="grid-cell">ltcg * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell">(1 - ltcg) * sprain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 6 - ISO Donate -->
              <div class="grid-cell">ISO</div>
              <div class="grid-cell">Dispose 1+ yr after exercise</div>
              <div class="grid-cell">Donate</div>
              <div class="grid-cell">amt * spread <a href="#notes" style="color: inherit; text-decoration: none;">[4]</a></div>
              <div class="grid-cell">sale price * (1 + match)</div>
              <div class="grid-cell">- strike price</div>
              <div class="grid-cell">sale price * income tax</div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 7 - NSO Sell -->
              <div class="grid-cell">NSO</div>
              <div class="grid-cell">Dispose 1+ yr after exercise</div>
              <div class="grid-cell">Sell</div>
              <div class="grid-cell">income tax * spread + ltcg * gain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell">(1 - income tax) * spread + (1 - ltcg) * gain</div>
              <div class="grid-cell"></div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Row 8 - NSO Donate -->
              <div class="grid-cell">NSO</div>
              <div class="grid-cell">Dispose 1+ yr after exercise</div>
              <div class="grid-cell">Donate</div>
              <div class="grid-cell">income tax * spread</div>
              <div class="grid-cell">sale price * (1 + match)</div>
              <div class="grid-cell">- strike price - income tax * spread</div>
              <div class="grid-cell">sale price * income tax</div>
              <div class="grid-cell"><input type="text" value="0" class="shares-input"></div>
              
              <!-- Totals Row -->
              <div class="grid-cell totals-cell">Totals</div>
              <div class="grid-cell totals-cell"></div>
              <div class="grid-cell totals-cell"></div>
              <div class="grid-cell totals-cell" id="total-gov"></div>
              <div class="grid-cell totals-cell" id="total-charity"></div>
              <div class="grid-cell totals-cell" id="total-cash"></div>
              <div class="grid-cell totals-cell" id="total-deduction"></div>
              <div class="grid-cell totals-cell" id="total-shares"></div>
            </div>
            
            <!-- Summary Lines - Outside Grid -->
            <div style="display: flex; flex-direction: column; margin-top: 20px; margin-left: auto; width: 100%; max-width: 600px; align-items: flex-end;">
              <div style="display: flex; margin-bottom: 8px; justify-content: flex-end;">
                <div style="font-weight: 500; font-size: 0.95rem; text-align: right; margin-right: 4px;">Total to charity:</div>
                <div id="total-to-charity" style="font-weight: 500; font-size: 0.95rem; width: 100px; text-align: right;"></div>
              </div>
              <div style="display: flex; justify-content: flex-end;">
                <div style="font-weight: 500; font-size: 0.95rem; text-align: right; margin-right: 4px;">Total to you:</div>
                <div id="total-to-you" style="font-weight: 500; font-size: 0.95rem; width: 100px; text-align: right;"></div>
              </div>
            </div>
          </div>
        </div>
        
        <hr>
        
        <!-- Notes Section -->
        <div id="notes" style="margin-top: 40px; margin-bottom: 30px;">
          <h3 style="font-size: 1.1rem; color: #555;">Notes</h3>
          <div style="max-width: 600px;">
            <p style="font-size: 0.85rem; margin-bottom: 12px;">
              <span style="display: inline-block; min-width: 20px; font-weight: 500;">[1]</span>
              I've chosen to elide technicalities or differences of a few percent in favor of simplification. I'm happy to go over any particular (US/California-centric) tax situation if you think 
              there may be a technicality that might apply!
            </p>
            <p style="font-size: 0.85rem; margin-bottom: 8px;">
              <span style="display: inline-block; min-width: 20px; font-weight: 500;">[2]</span>
              The match will likely be in shares, but easier to reason about as the cash-equivalent.
            </p>
            <p style="font-size: 0.85rem; margin-bottom: 8px;">
              <span style="display: inline-block; min-width: 20px; font-weight: 500;">[3]</span>
              Two big caveats: If the total here is large, you may be limited by charity itemized deduction limits (probably deserves its own calculator). If the total here is small, you may need to subtract $5-10k from the total for each year that you donate (mostly to account for the fact that the counterfactual to donating is that you get the standard deduction).
            </p>
            <p style="font-size: 0.85rem; margin-bottom: 8px;">
              <span style="display: inline-block; min-width: 20px; font-weight: 500;">[4]</span>
              This deserves its own calculator, but at a high level, each year you work and have a "normal" tax situation you generate tens of thousands of "AMT credits". Ignoring questions of cash flow, you only end up paying AMT if your (lifetime, post-exercise) AMT credits don't cover the AMT you owe. 
              For now, I've excluded AMT from Totals, and haven't subtracted it from "what you get in cash".
            </p>
          </div>
        </div>
      </div>
    </div>
    <script src="script.js"></script>
  </body>
</html>